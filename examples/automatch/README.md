# Example: Automatch

The automatch examples uses the automatcher to match three models with varying level of depth:
```go
type Account // domain
    // 0
    ID      int
    Name    string
    Email   string
            // 1
    User    domain.DomainUser
                UserID  int
                Name    string    
type User    // models
    // 0 
    UserID    int
    Name      string
              // 1
    UserData  models.UserData
                  Options map[string]interface{}
                  // 2
                  Data    models.Data
                        ID      int
type Account // models
    // 0
    ID       int
    Name     string
    Password string
    Email    string
```

## YML

```yml
# Define where the code will be generated.
generated:
  setup: ./setup.go
  output: ../copygen.go

# Templates and custom options aren't used for this example.
```

## Go

Specify a depth-level of one for all fields of `domain.Account`. Specify a depth-level of 2 for all fields of `models.User`. The depth-level for `models.Account` was not specifie, so the default will be used. A _regex_ [negative lokbehind](https://www.regular-expressions.info/lookaround.html) is used to ensure sub-fields of the first-level fields aren't applied depths of their own.

```go
/* Copygen defines the functions that will be generated. */
type Copygen interface {
  // depth domain.Account.*(?!\.) 1
  // depth models.User.*(?!\.) 2
  ModelsToDomain(models.Account, models.User) *domain.Account
}
```

## Output

`copygen -yml path/to/yml`

```go
// Code generated by github.com/switchupcb/copygen
// DO NOT EDIT.
package copygen

import (
	"github.com/switchupcb/copygen/examples/automatch/domain"
	"github.com/switchupcb/copygen/examples/automatch/models"
)

// ModelsToDomain copies a Account, User to a Account.
func ModelsToDomain(tA domain.Account, fA models.Account, fU models.User) {
	// Account fields
	tA.ID = fA.ID
	tA.Name = fU.Name
	tA.Email = fA.Email
	tA.Name = fU.Name
	tA.User.UserID = fU.UserID

}
```